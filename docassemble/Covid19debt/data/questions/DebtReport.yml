---
metadata:
  title:  |
    Personal Debt Advisor  
  description:  |
    A system to help individul to understand the full extent of your their debt problem as well privide debt advices.  
  authors:
    - name: Adam Wyner, Tao Li
      organization: Swansea University 
  revision_data: 2021-06-13

---
modules:
  - docassemble.base.util
  - .income
---
objects:
  - user: Individual
  - degree: DAList
  - address: Address
  - jobs: JobList.using(there_is_another=False,complete_attribute='is_hourly')
  - other_income: IncomeList.using(there_is_another=False,complete_attribute='type')
  - assets: ValueList.using(there_is_another=False,complete_attribute='type')
  - income_assets: IncomeList.using(there_is_another=False,complete_attribute='type')
  - expenses: JobList.using(there_is_another=False,complete_attribute='type')
  - vehicles: VehicleList.using(there_is_another=False,there_are_any=True,complete_attribute='year')
  - debt:  DAList.using(there_are_any=True, object_type=DAObject, complete_attribute='name')
---
#mandatory: True
#code:  |
#  user.number
#  user.gender
  
---
sections:
  - introduction: Introduction
  - preparation: Preparation
  - personal_info: Personal Info
  - house_hold: Household Info
  - debt_types: Debt Type
    subsections:
    - priority_debts: Priority Debts
    - non_priority: Non-priority Debts 
  - debt_info: Debt Information
  - breathing_space: Breathing Space
    subsections:
     - standard_bs: Standard Breathing Space
     - mentalh_bs: Mental Health Breathing Space
  - finance_info: Finance
    subsections: 
    - income: Income
    - expenditure: Expenditure
  - summary: Summary 
  - debt_solutionss: Debt Solutions
  - signatures: Signatures
  - conclusions: Conclusion
---
features:
  navigation: True
  small screen navigation: dropdown
  progress bar: True
---
event: welcome_back
question: |
  Welcome back!
subquestion: |
  You are currently in the
  **${ nav.get_section(display=True) }**
  section.

  ${ nav }

  Press "Continue" to pick up
  where you left off.
buttons:
  Continue: continue
---

mandatory: True
code: |
  menu_items = [ action_menu_item('Roadmap', 'road_map') ]
---
initial: True
code: |
  if returning_user(minutes=0.5):
    welcome_back
---

mandatory: True
question: |
  Welcome To Personal Debt Help 
subquestion: |

  Having debt issues is stressful. We are here to help. Our goals are:
  
   
    -- Help users to understand thier debt situation
    
    -- Encourage users to take actions to address their debts.
    
    -- Provide options and solutions according to your personal siutation. 
    
    -- We will not ask or store reference to an identifier such as a name, an identification number, specific location data of an individual. 
    
    -- Our service is not an alternative to seeking for professional help. Our goal is to help you prepare necessary information as well as knowledge before you look for help. You will also need professional to set up certain debt solutions. 
  ######Would like to proceed to application page?
  note: You must agree with our terms and conditions to continue. All you  data is **confidential** and wil not be stored or used elsewhere.  

buttons: 
  
  - I Agree: continue
  
      
    
field: sees_nav_bar 
---
mandatory: True
section: preparation
question:  |
  Preparation 
subquestion:  |
 In this page, you can find what infomration and documents you need to get the relenvant information. 
 
 ######1. The details of you debt will be asked, it is best if you can find debt contracts, emails, letters or any written documents might give you the following details:
  
  - Amount of your debts
  
  - First missed payment date
  
  - The person or organization that you own debt to (Creditor) 
  
  - Any actions taken by the creditor 
  
  - Dispute (if any) regard to any particular debts.
  
 ######2. To help you/us understand your financial situation, your income, expenses and assests will be asked. You might need to find some documents such as purchurse invoice, shopping/house hold bills etc. for the following information:
  
  - The breakdown of your expenses, such as how much you spend on food per month etc
  
  - After tax income per month\week. 
  
  - Your aseets such as cars, houses, bank saving and anything of value. 
  
 #####3. There are different types of debts, which requires different debt solutions to address them. You can try to figure out the following things:
   
   - What type of debts are yours: {Secured debts} or {Unsecured debts} 
   
   - If you a house owner, some debt solutions will have impact on your ownership of the property
   
   - Some debt solutions have impact on your crediet scores
   
   - Details of your past debt solutions if you have any.
continue button field: user_saw_intro  
---
section: personal_info
event: final_screen
question:  |
  We can not provide right infromation for you
subquestion:  
  You need to agree with our term to proceed, you need to be a Welsh resident and you need to be at least 18 years old.
---
section: personal_info
event: personal_info
question:  |
  Please Review your information?
review:
  
  - Edit Birth date: user.birthday
    button:  |
      Birthday: ${user.birthday}
  
  - Edit Work: user.work
    button:  |
      Working Status: ${user.work}
---
section: priority_debts

question:  |
  Priority Debts
review:  
  - Edit Priority Debts: t_variable
    button: |
      Which Priority Debts is your main issues: ${t_variable}
---
section: non_priority

question:  |
  Priority Debts
review:  
  - Edit Non Priority Debts: no_pd
    button: |
      Which Non Priority Debts is your main issues: ${no_pd}
  
---
section:  house_hold
event:  house_hold
question:  |
  Please review your household information?
review:
  - Edit housing status: user.house_status
    button :  |
      Housing Status: ${user.house_status}
  - Edit Marriage Status: user.marriage
    button:  |
      Marriage Status: ${user.marriage}
  - Edit Children Number: user.childrenNum
    button:  |
      Children Number: ${user.childrenNum}
  - Edit Total Household Number: user.house_num
    button:  |
      Household Number: ${user.house_num}
---
event: debt_info
section: debt_info
question:  | 
  Review your debt here 
subquestion:  |
   ${debt.table}
   
   ${debt.add_action()}
review:  
 - note: |
---
table: debt.table
rows: debt
columns: 
  - Debt Type: |
      row_item.name
  - Debt Amount: |
      row_item.amount
  - Debt Creditor: |
      row_item.creditor
  - Debt Urgency: |
      row_item.urgency
  - Debt Liability: |
      row_item.libility
edit:
  - name
minimum_number: 1
---
event: income
section: income
question:  |
  Review your income here
subquestion:  |
  ${jobs.table}
  
  ${jobs.add_action()}
review:
  - note:  |
---
event: expenditure
section: expenditure
question:  |
  Review your expenditure here 
subquestion:  |
  ${expenses.table}
  
  ${expenses.add_action()}
review:
  - note:  |
---
mandatory: True 
question:  |
  Please provide your information?
section: personal_infoo
fields:
 
  - Proceed only if you are over 18 years old: user.birthday
    datatype: yesnoradio
    required: False
    help:  |
      If you are under 18 and have debt yourself, please contact a professonal for help. It is most likely that your debt is not valid and you dont have to pay for it. 
    

##  - What is your condition: user.mentalcondition
##    show if:
##      variable: user.ifhealth
##      is: True   
  - Are you working at the moment?: user.work
    required: False
    input type: dropdown
    choices:
      - Full time 
      - Part time 
      - Unemployed 
      - Retired
      - Student
  - What is your occupation? : user.occup1
    required: False
    show if:
      variable: user.work
      is: Full time 
  - What is your occupation?: user.occup2
    show if:
      variable: user.work
      is: Part time
  
  - Welsh Resident: user.uk
    required: False
    datatype: yesnoradio
    help:  |
      Different regions within UK have different rules for debts. If you are holding a visa to work and live in Wales, please make sure it is known when you look for perfessonal help, as some of the the debt solutions might affect your visa application. 
  - UK based debt: user.uk_debt
    required: False
    datatype: yesnoradio
    
     

field: sees_nav_bar    
---
mandatory: True 
question:  |
  Please provide your household information?
section:  house_hold
fields:
  - What is your housing status? : user.house_status
    required: False
    input type: dropdown
    choices: 
      - Renting
      - Renting (social house)
      - Mortgaged
      - Owns property outright
      - Joint tenants
      - Joint Mortgage 
      - Living with family
      - other
  - Who do you share with for renting? : user.house_status_rentshare
    required: False
    show if:
      variable: user.house_status
      is: Joint tenants 
    help:  |
      If you have a joint tenancy, you are liable for the rent both jointly and individually. This means that one or all of you can be held responsible for the whole rent
    hint: |
      etc., sharing with family, friends 
  - Who do you share mortgage with?: user.house_status_mortshare
    show if:
      variable: user.house_status
      is: Joint Mortgage 
    hint: |
      etc., sharing with partner, family
    help:  |
      Specific name is not required, just to clarify the general situation. 
  - Marriage Status: user.marriage
    required: False
    input type: dropdown
    choices:
      - Married
      - Single 
      - Divorced 
      - Separated 
      - Widowed
  - Number of dependents : user.childrenNum
    required: False
    datatype: integer
  - How many people in your household in total?(including yourself): user.house_num
    required: False
    datatype: integer
  - Are the people in the household aware of your debt situation?: user.house_aware
    required: False
    datatype: yesnoradio
    help: |
      Some of the debt solutions will need you to declare publicly, and will also affect your housing situation. 
    
 
#mandatory: True
#code: |
#  address.geolocate()

field: sees_nav_bar    

---
code:  |
  is_homeowner = "Not Home Owner"
  is_court_debt = "Dont have a Court Action"
  if user.house_status == "Mortgaged" or  user.house_status == "Owns property outright":
    is_homeowner = "Is a Homeowner"
  for item in debt:
    if item.urgency =="Court Action":
      is_court_debt ="Have a Court Action"
---
mandatory: True
question:  |
  Priority Debts
subquestion:  |
  Some debts are called priority debts because if you do not pay them you could face serious consequences. Priority debts should always be dealt with BEFORE your non-priority debts. 
 
  Please Select one or more Priority debts that is closer to your debt issue:
 
fields:  
  - Rent/Mortgage: placehold_1
    datatype: noyes
    help: might lose your home through mortgage or rent arrears 
  - Gas and electricity debts: placehold_2
    datatype: noyes
    help: they might cut off your gas or electricity if you don’t pay
  - Council Tax: placehold_3
    datatype: noyes
    help: This is a priority debt because your local council might take you to the magistrate’s court if you don’t pay.If you have the money but choose not to pay when the magistrate’s court tells you to, you could go to prison. You won’t go to prison if you can show you can’t pay
  - certain payments ordered by the courts: placeholder4
    datatype: noyes
    help: you could be sent to prison if you have the money but choose not to pay. You won’t go to prison if you can show you can’t pay
  - Unpaid child maintenance: placeholder5
    datatype: noyes
    help: Child Maintenance Service can take the money from your wages or bank accounts if you don’t pay
  - Phone and internet Bills: placeholder6
    datatype: noyes
    help: These might be priority debts because your supplier can cut off your phone or internet if you don’t pay.
  - TV licence payments: placeholder7
    datatype: noyes
    help: This is a priority debt because you could be fined by the magistrate’s court if you watch TV without a licence. If you have the money but choose not to pay a court fine, you could be sent to prison. You won’t go to prison if you can show you can’t pay.
  - Payments for goods bought on hire purchase or conditional sale: placeholder8
    datatype: noyes
    help: This might be a priority debt because the creditor could take back the goods you bought. If you keep the goods in your home or you’ve paid back more than a third of the cost, the creditor has to go to court to do this.
  - Unpaid income tax, National Insurance or VAT: placeholder9
    datatype: noyes
    help: These are priority debts because if you don’t pay, HM Revenue and Customs (HMRC) can take the money from your wages, can use bailiffs to take your property
  - Overpaid tax credits: placeholder10
    datatype: noyes
    help: This is a priority debt because if you don’t pay, HMRC can, take the money from your wages, take the money from your benefits or tax credits and use bailiffs to take your property
section: priority_debts
---
mandatory: True
question:  |
  None Priority Debts
subquestion:  |
  Once you’ve got your priority debts under control, you should look at all your other debts. They’re ‘non-priority debts’ because the problems they cause are less serious.
  
  Your non-priority debts might include:
fields: 
  - Select one or more: no_pd
    datatype: checkboxes
    code:  |
      [
        {'credit card or store card debts':'Credit card or store card debts'},
        {'catalogue debts':'Catalogue debts'},
        {'unsecured loans including payday loans':'Unsecured loans including payday loans'},
        {'unpaid water bills - your supplier can’t cut off your water supply':'unpaid water bills'},
        {'overpayments of benefits - apart from tax credits':'overpayments of benefits - apart from tax credits'},
        {'unpaid parking tickets - these are called Penalty Charge Notices or Parking Charge Notices':'Unpaid parking tickets - these are called Penalty Charge Notices or Parking Charge Notices'},
        {'money you own to friends or family': 'Money you owe to family and friends'}
      ]
    
section: non_priority
---
question:  |
  Debt Information
subquestion:  |
  Please provide you debts information correctly here.  
  Identify type and amount of ${ ordinal(i) } debts you own:
section: debt_info
fields: 
  - Debt type: debt[i].name
    required: False
    datatype: dropdown
    code:  |
      debt_type_list
  - Amount: debt[i].amount
    required: False
    datatype: currency 
    min: 0
    currency symbol: £
  - Please Specify: new_name
    show if:
      variable: debt[i].name
      is: other
    #code: |
    #  debt[i].name = new_name
  - Creditor for the debt: debt[i].creditor 
    required: False
    help:  |
      People or organisation you own debt to
  - Relevant account or reference number: debt[i].reference
    required: False
    help:  |
      If you own debt from an organisation, for instance Bank, you might have such a number.
  - Date of first missed payment : debt[i].first_miss_date
    datatype: date
    required: False
  - Liability Check on this Debt: debt[i].libility
    input type: dropdown
    choices: 
      - This debt is over 6 years
      - Have payments been made wowards the debt within past 6 years
      - There was pressure applied to the individual to sign/borrow
      - under the age of 18 years when signed/borrowed
      - The debt/extent of the debt was not agreed/committed to by contract 
      - The debt shared with other person
      - None
    help:  |
      You might not have to pay a debt if one of these is true for you. Please bring this up when you consult with a professonal debt help.
  - What action has been taken by the creditor?: debt[i].urgency
    required: False
    input type: dropdown
    choices: 
      - Will be evcited from home 
      - Court Action
      - Cut off electricity/gas
      - No Action
  - What type of court action?: debt[i].urgency_court
    required: False
    input type: dropdown
    choices:
      - Liability Order
      - Enforcement 
    show if:
      variable: debt[i].urgency
      is: Court Action
  - What type of enforcement?: debt[i].urgency_court_enforce
    required: False
    input type: dropdown
    choices:
      - Bailiff
      - Attachment of earnings
      - Charging order 
    show if: 
      variable: debt[i].urgency_court
      is: Enforcement
  - Going through a formal insolvency procedure currently?: another_debt_solution
    required: False
    input type: dropdown
    choices: 
      - Debt relief Order 
      - Bankruptcy 
      - Individual Voluntary arrangement 
      - Administration Order 
      - None 
    help:  |
       It is important to know this as some of the debt solutions might not be available to you if you are going through one of these. Please bring this up with your debt specialist when you consulte them. 
      
      
---   
mandatory: True

question: |
  Description of all your debts
  
subquestion: |
  Creditor    |Debt Name     |Amout
  -------|-----------|----------------
  % for item in debt:
  ${item.creditor} | ${ item.name } | £${ item.amount }
  % endfor
  
   Creditor    |Debt urgency    |Debt Liability 
  -------|-----------|----------------
   % for item in debt:
     % if (item.urgency != 'None') or( item.libility !='None'):
     ${item.creditor} | ${ item.urgency } | ${ item.libility }
     % else:
     None  |None |None
     % endif
   % endfor
   ${debt_total1}
buttons:
  - Continue: continue  
---   

code:  |
  debt_type_list = ['Credit Card', 'Bank overdraft', 'Rent arrears','Catalogue spending', 'Morgage arrears','Council Tax', 'Energy bill arrears','Water arrears','Mobile phone arrears','Home Phone or broadband arrears','Personal loan','TV license','Court Fine/ Penalty charge','Student Loans','Loan from family member or friend','Child maintenance/child support agency debts','Claims against you for damage or personal injury','Fine','Social fund loan','HMRC tax debt','Universal credit advance','other']

---
question:  Are there any other debts you want to add?
yesno:  debt.there_is_another

---
table: debt.table
rows: debt
columns: 
  - Debt Type:  |
      row_item.name
  - Debt Amount:  |
      row_item.amount
  - Debt Creditor:  |
      row_item.creditor
  - Debt Urgency:  |
      row_item.urgency
  - Debt Liability:  |
      row_item.libility
edit:
  - amount
minimum_number: 1
---
code:  |
  debt_list = []
  for item in debt:
    debt_list.append(item.amount)
  debt_total= sum(debt_list)
  debt_total1=0
 
  for i in range(0,len(debt)):
    debt_total1= debt_total1+debt[i].amount
  debt_num=len(debt) 
  
---
section: standard_bs
mandatory: True
question:  |
  Breathing space for Debt
subquestion:  |
 ##### What is breathing space:
 
  Government’s new breathing space period will freeze interest, fees and enforcement for people in problem debt, with further protections for those in mental health crisis treatment
 
 ###### The Debt Respite Scheme (Breathing Space) will give someone in problem debt the right to legal protections from their creditors.
 
 A standard breathing space is available to anyone with problem debt. It gives them legal protections from creditor action for up to 60 days. The protections include pausing most enforcement action and contact from creditors and freezing most interest and charges on their debts.
 
 ##### How to Apply for a standard breathing space:
 
 Debtors can only access a breathing space by seeking debt advice from a **debt adviser**.

  Anyone who cannot or is unlikely to be able to repay their debts can apply to a debt adviser for a standard breathing space.

  Although all applications must be considered, the debt adviser might decide a breathing space is not appropriate for a debtor.

  For example, if a person can access funds or income, they might be able to pay their debts with some budgeting help. Another example would be if they already have assets that could easily be sold to clear the debt. In these cases, a breathing space would not be the right solution. A breathing space might also not be appropriate for a someone who can enter a more suitable debt solution straight away, without needing the protections.
  
 ##### Debtor eligibility for a standard breathing space:
  
  Before a debt adviser can start the breathing space, they must confirm their client is eligible and meets all the conditions. 
    
    - be an individual
    - owe a qualifying debt to a creditor
    - live or usually reside in England or Wales
    - not have a debt relief order (DRO), an individual voluntary arrangement (IVA), an interim order, or be an undischarged bankrupt at the time they apply
    - not already have a breathing space or have had a standard breathing space in the last 12 months at the time they apply
    
 ##### What are Qualifying debts:
 
 Debts included in a breathing space must be qualifying debts. Debts are any sum of money owed by the debtor to you, while liabilities are any obligation on the debtor to pay money to you. Most debts are likely to be qualifying debts. These will include:
 - credit cards
 - store cards
 - personal loans
 - pay day loans
 - overdrafts
 - utility bill arrears
 - mortgage or rent arrears
 
 The following debts are **excluded**:
   
   - secured debts (like mortgages, hire purchase or conditional sale agreements). 
   - debts incurred from fraud or fraudulent breach of trust. 
   - liabilities to pay fines imposed by a court for an offence. This includes any interest on the fine and any penalties connected to it. This does not include penalty charge notices, like a parking ticket
   - obligations from a confiscation order
   - a crisis or budgeting loan from the social fund
   - student loans
   - damages they need to pay for death or personal injury caused to someone else
   - advance payments of Universal Credit
   - council tax liabilities have not yet fallen due. If all instalments for that financial year have fallen due and have not been paid, these are considered to be a qualifying debt.
   
 #####When a breathing space starts
 
 A breathing space will start the day after the debtor’s details are put onto the breathing space register.

  If you receive electronic notifications about the start of a breathing space, you should receive a notification the same day that details are put on the register. It’s likely this will be the day before the breathing space starts. If you receive notifications by post, it’s likely you’ll receive it after the breathing space has started.
  
 For more information, Please [click here](${ url_of('https://www.gov.uk/government/publications/debt-respite-scheme-breathing-space-guidance/debt-respite-scheme-breathing-space-guidance-for-creditors') }).

buttons:  
 - Continue: continue
---
section: mentalh_bs
mandatory: True
question:  |
  Mental health Breathing space 
subquestion:  |
  A mental health crisis breathing space is only available to someone who is receiving mental health crisis treatment and it has some stronger protections. It lasts as long as the person's mental health crisis treatment, plus 30 days (no matter how long the crisis treatment lasts).
  
  The government committed to develop an alternative route to access the protections for people receiving mental health crisis treatment, so that they do not have to access debt advice first. If an Approved Mental Health Professional (AMHP) certifies that a person is receiving mental health crisis treatment, the AMHP’s evidence can be used by a debt adviser to start a mental health crisis breathing space.

  In addition to the debtor, the following people can apply to a debt adviser on behalf of a debtor for a mental health crisis breathing space:
   
   - any debtor receiving mental health
    - the debtor’s carer
    - Approved Mental Health Professionals
    - care co-ordinators appointed for the debtor
    - mental health nurses
    - social workers
    - independent mental health advocates or mental capacity advocates appointed for the debtor
    - a debtor’s representative
    
  #####Debtor eligibility for a mental health crisis breathing space
  
   The debtor must still meet the same criteria and conditions for a standard breathing space, but they must also be receiving mental health crisis treatment at the time that an application is made. A debtor who has had a standard or mental health crisis breathing space in the last 12 months may be eligible for a mental health crisis breathing space.

   there is no limit to how many times a debtor can enter a mental health crisis breathing space.
   
buttons:  
 - Continue: continue
---

question:  |
  Hello, ${user}!
---
question: |
  Vehicle
fields:
  - Year: vehicles[0].year
  - Make: vehicles[0].make
  - Model: vehicles[0].model
---
#mandatory: True
question: |
  You said the vehicle was ${vehicles[0].year_make_model()}
field: ok  
---
question:  |

  What types of financial information can you provide? 
subquestion:   | 

  In this section, you need to enter how much money you take home (after tax) from each income type listed in the table below and wheather it's paid weekly, monthly or annually.  
section: income
fields:

  - Employment income: jobs.there_are_any
    datatype: yesno
  - Assets (such as cars, boats, etc.): assets.there_are_any
    datatype: yesno
  - Expenses: expenses.there_are_any
    datatype: yesno
---
question: |
  Do you want to add any more income?
yesno: jobs.there_is_another
---
table: jobs.table
rows: jobs
columns:
  - Source of Income: |
      row_item.employer
  - Amount: |
      currency(row_item.amount(),symbol=u'£')
     
edit:
  - is_hourly 
minimum_number: 1

---
table: other_income.table
rows: other_income
columns:
  - Type: |
      row_item.type if defined('row_item.type') else ''
  - Amount: |
      currency(row_item.amount(), symbol=u'£')
      
      
      
edit:
  - type 
minimum_number: 1
---
table: assets.table
rows: assets
columns:
  - Type: |
      row_item.type if defined('row_item.type') else ''
  - Value: |
      currency(row_item.amount(), symbol=u'£')
      
edit:
  - type 
minimum_number: 1
---
table: income_assets.table
rows: income_assets
columns:
  - Type: |
      row_item.type if defined('row_item.type') else ''
  - Amount: |
      currency(row_item.amount(),symbol=u'£')
      
edit:
  - type 
minimum_number: 1
---
table: expenses.table
rows: expenses
columns:
  - Type: |
      row_item.type if defined('row_item.type') else ''
  - Amount: |
      currency(row_item.amount(),symbol=u'£')
      
      
edit:
  - type 
minimum_number: 1
---
question: |
  Describe your ${ordinal(i)} job.
section: income
fields:
  - Source of this income?: jobs[i].employer
    help:  |
      It can be your job earnings, benifits, pensions, student loans or any other form of income
  - Is it an hourly job?: jobs[i].is_hourly
    datatype: yesno
  - Hourly rate: jobs[i].hourly_rate
    datatype: currency
    min: 0
    currency symbol: £
    show if: jobs[i].is_hourly
  - Average hours worked per period: jobs[i].hours_per_period
    datatype: integer
    show if: jobs[i].is_hourly
  - Amount: jobs[i].value 
    datatype: currency
    min: 0
    currency symbol: £
    show if:
      variable: jobs[i].is_hourly
      is: False
  - '': jobs[i].period
    datatype: number
    code:  |
     period_list() + [[4,"Per quarter"]]


---
##question: |
##  What income do you have that is not from a job?
#section: income
#fields:
#  - What type of income is it?: other_income[i].type
#    code: |
#      income_type_list()
#  - Amount earned: other_income[i].value 
#    datatype: currency
#    min: 0
#    currency symbol: £
#  - Over what time period: other_income[i].period
#    datatype: number
#    code: |
#      period_list()

---
question: |
  What non-income generating assets do you have?
section: income
fields:
  - What type of asset is it?: assets[i].type
    code: |
      asset_type_list()
  - Asset name?:  assets[i].type
    show if:
      variable: assets[i].type
      is: other
    help:  |
      Write down anything you think of as valuable, A new TV, laptop etc.
    
  - Estimated Value: assets[i].value 
    datatype: currency
    min: 0
    currency symbol: £

---
question: |
  What income generating assets do you have?
section: income
fields:
  - What type of asset is it?: income_assets[i].type
    code: |
      asset_type_list()
  - Present Value: income_assets[i].value 
    datatype: currency
    min: 0
    currency symbol: £
  - Income generated by this asset: income_assets[i].income
    datatype: currency
    min: 0
    currency symbol: £
  - Loan amount (if any): income_assets[i].amount_owed
    datatype: currency
    min: 0
    currency symbol: £
  - Over what time period: income_assets[i].period
    datatype: number
    code: |
      period_list()

---
question: |
  What expenses do you have?
section: expenditure
fields:
  - What type of expense is it?: expenses[i].type
    code: |
      expense_type_list()
  - Expense amount: expenses[i].value 
    datatype: currency
    min: 0
    currency symbol: £
  - Over what time period: expenses[i].period
    datatype: number
    code: |
      period_list()

---
mandatory: True
question: |
  Summary of your Income
subquestion: |
  ${ jobs.table }

  Your total annual income is ${ currency(jobs.total(),symbol=u'£') }
  
  Your total monthly income is ${ currency(jobs.total(period_to_use=12),symbol=u'£') }  

  ${ jobs.add_action() }
  
  
field: income_summary
---
#mandatory: True
#question: |

#Annual Other Income
#subquestion: |
#  ${ other_income.table }
#
#  Your total annual non-wage income is ${ currency(other_income.total(),symbol=u'£') }
  
#  Your total monthly non-wage income is ${ #currency(other_income.total(period_to_use=12),symbol=u'£') }  

#  The types of income include ${ comma_and_list(other_income.types(),symbol=u'£') }

#  ${ other_income.add_action() }
  
  
#field: other_income_summary
---
mandatory: True
question: |
  Assets
subquestion: |
  ${ assets.table }
  
  Your total assets value is:  ${ currency(assets.total(),symbol=u'£') }
  
  ${ assets.add_action() }

 
field: assets_summary
---
mandatory: True
question: |
  Expenses
subquestion: |
  ${ expenses.table }
  
  The types of expenses include ${ comma_and_list(expenses.types()) }
  
   Your total monthly expense is ${ currency(expenses.total(period_to_use=12),symbol=u'£') }
  
  Your total annual expenses is ${ currency(expenses.total(),symbol=u'£') }
  
  ${ expenses.add_action() }
field: expenses_summary
---

question:  |
  Advices on your expenditure:
subquestion:  |

  
  % for item in expense_advices:
    ${item} 
    
  % endfor
  

field: expenditure_summary
---
code:  |
  expense_advices =[]
  averge_cost_living ={
          "Food & Non-Alcoholic Drinks": 254.8,
          "Alcoholic drink, tobacco &carcotics":51.6,
          "Clothing & Footwear": 93.6,
          "Fuel & Power":100,
          "Rent": 210, 
          "Utilities": 146,
          "Health": 32.8,
          "Transport": 326.4,
          "Communication": 85.6,
          "Hotels & Restaurants": 211.6,
          "Total Expenditure": 2351.6
          }
  averge_cost_list= ["Food & Non-Alcoholic Drinks","Alcoholic drink, tobacco &carcotics","Clothing & Footwear","Fuel & Power","Rent","Utilities", "Health","Transport","Communication","Hotels & Restaurants","Total Expenditure"]
  
  for item in expenses:
    if item.type in averge_cost_list:
       spend_diff = item.value - averge_cost_living[item.type] 
       
       if spend_diff <0 and abs(spend_diff) >40:
         expense_advices.append("You spend £"+str(item.value)+" on "+ item.type+ "  which is £"+str(abs(spend_diff))+" less than average expenditure £" + str(averge_cost_living[item.type])+" per month.")
       elif spend_diff >0 and abs(spend_diff) >40:
         expense_advices.append("You spend £"+str(item.value)+" on "+ item.type+ "  which is £"+str(abs(spend_diff))+" more than average expenditure £" + str(averge_cost_living[item.type])+" per month.")
  

---
section: summary
mandatory: True 
event: summary
question:  |
 Here are the summary, you can review and edit 
subquestion:  |
  Your family size is **${user.house_num}**
  
  Your current house status is: **${user.house_status}**  
  
  you own **${currency(debt_total1, symbol=u'£')}** debts in total, you have **${len(debt)}**  debts
  
  Your debts  **${is_court_debt}**.
 
  Your monthly income is  **${ currency(jobs.total(period_to_use=12),symbol=u'£') }**
 
  Your total assets value is:  **${ currency(assets.total(),symbol=u'£') }**
  
  Your total expenditure is **${ currency(expenses.total(period_to_use=12),symbol=u'£') }** per month
  
  Your monthly disposible income **${currency(month_disposble_income, symbol=u'£')}**

  ####### Revisit and edit your data by clicking on the menu at sections accordingly.
  
review:
  - Update:
     - debt_total
     - month_disposble_income
     - is_court_debt
     - is_homeowner
    button:  |
        Update to see most recent data by clicking on:
  
field: review_answer
---
mandatory: True
code: |
  menu_items = [ action_menu_item('Review Answers', 'review_answers') ]
---

code:  |
  month_disposble_income = jobs.total(period_to_use=12) - expenses.total(period_to_use=12)
---

question:  |
  Perferences and choices
subquestion: |
  Some of debt solutions will affect your credit rating, prohibt you from undertaking certain jobs and may have impacts on your home. Please answer the following question carefully. 
  
  **click on question mark to see what each scale stands for.**
  
fields:
  - likehood of change of financial situations in the near future? : financial_change
    datatype: range
    min: 0
    max: 10
    help:  |
      for instance, inheritance, promotion with job, move to new house etc. 0 means very unlikely, 10 means very possible change of situation.  
  - your credit will be affected: credit_rating1
    datatype: range
    min: 0
    max: 10
    help:  |
      When you apply for a loan or other type of credit, the credit provider will search your credit reference file to see how much of a risk it is to lend to you. The level of risk is known as your credit rating. It can be affected by your personal financial. O means you dont mind credit rating impact, 10 means you want to avoid low recredit punishment. 
  - Cost of debt solution?: cost_debt 
    datatype: range
    min: 0
    max: 10
    help:  |
      Some debt solution are significantly more expensive than others, from 90 pounds to 700 to few thousands. 0 menas you dont mind cost, 10 means you are very sensitive to the cost. 
  - Keep your home: home_owner_pri
    datatype: range
    min: 0
    max: 10
    help:  |
      some debt solution need you to sell your house. 0 means you dont mind sell your house to pay back debt, 10 means you want to keep the house as much as possible. 
  
  - Deal with creditor directly: deal_creditor
    datatype: range
    min: 0
    max: 10
    help:  |
      Some debt solution will hdeal with your creditors for you. 0 means you dont want to have deal with creditor, 10 means you dont mind to deal with them yourself. 
      
  
---
code:  |
  if home_owner_pri<5:
    home_will=" Dont mind to sell house"
  else:
    home_will=" Prefer to keep house"
  
  if cost_debt>5:
    cost_will= "You wish to spend less on debt solution"
  else:
    cost_will= " The cost of debt solution is not a issue for you"
  
  if credit_rating1>5:
    credit_will="You wish to find a solution with less credit rating punishment"
  else:
    credit_will="You dont mind much about credit rating"
    
  if financial_change>5:
    change_will ="You are likely to have a change of financial/personal situation."
  else:
    change_will ="You are less likely to change you financial/personal situation"
  
  if deal_creditor<5:
    change_creditor="You dont want to deal with creditors"
  else:  
    change_creditor="You dont mind to deal with creditors"
  
  
---
section:  debt_solutions
event: debt_solutionss
mandatory: True 
question: | 
   Debt Solutions
subquestion: |
  #####You can consider the following solutions:
  
  **Debt Management Plan** [detail](${ url_action("Debt Management Plan") })
  % for item in Available_solutions:
  
    
  
    **${item["name"]}** [detail](${ url_action(item["name"]) }),                            
  % endfor

  
  
  #####The follwoing solutions are not ready for you:
  
  
  % for item in not_available_solution:
  
    **${item["name"]}**   due to  
    ${item['reason']}
    [detail](${ url_action("not "+item["name"]) }),
  % endfor
review:
  - Re-evaluate:
     - debt_total
     - month_disposble_income
     - is_court_debt
     - is_homeowner
    button:  |
continue button field: user_saw_intro
---
section: debt_solutionss
event: Bankruptcy
question:  |
  What is Bankruptcy and if it is for you 
subquestion:  |
 Bankruptcy is a form of insolvency and is normally only suitable if you can’t pay back your debts in a reasonable time. When you go bankrupt almost all of your debts are written off. Deciding to go bankrupt is a big step that involves fees and can impact different areas of your life, such as your job or home.
    
 **Advantages of going bankrupt:**
 
   1. When the bankruptcy order is over you can make a fresh start - in most cases this will be after a year.

   2. the pressure is taken off you because you don’t have to deal with your creditors
  you're allowed to keep certain things known as 'exempt goods', for example everyday household items, tools you need to do your job, a car if you need it to get to work or you're a carer and it's not worth more than £2,000
  
   3. you're allowed to keep some of your income - but you'll probably have to live on less money than usual
   
   4. if you have to make payments from your income, this can only be for 3 years - you won’t have to make payments if your only income is from welfare benefits
   
   5. creditors have to stop most types of court action to get their money back following a bankruptcy order

   6. you won't have to pay back the debts that bankruptcy covers
 
 **Things you need to watch out when apply:**
  
  1.	You may lose your home if you have any equity available (by title or beneficial interest).
  2.	You may be asked to sell your car or trade down for a less expensive model.
  3.	Until your bankruptcy is discharged you may find it difficult to obtain, or change, a mortgage.
  4.	Some professional bodies, such as chartered accountants or solicitors, may have rules prohibiting membership and you cannot enlist in the armed forces as an undischarged Bankrupt.
  5.	The court may enforce an ‘income payments order’ for three years if it deems it necessary.
  6.	Your credit rating will be affected
  7.  The cost of bankruptcy is high (680 pounds)
  
  **Is it for you?**
    
    1. For bankruptcy, you might need to sell you house, you said **${home_will}**
    
    2. For banruptcy, the cost is relatively high(£680), you said **${cost_will}**
    
    3. Banruptcy will affect your credit rating, you said **${credit_will}**
  
 **Which debts are excluded in a bankruptcy?**
    
 The following debts will not be cleared by a bankruptcy. You’ll need to keep paying these.
 
  - Child maintenance arrears, if the arrangement was set by the CSA or Child Maintenance Service
 - Criminal fines, compensation orders and victim surcharges from a magistrates’ court   or crown court
 - Debts you take out after the date of your bankruptcy order
 - Debts taken out fraudulently, for example benefit fraud
 - Mortgages and other debts secured against your home, if you want to keep the house
 - Social Fund loans
 - Student loans
 - TV Licence arrears
 - Court orders telling you to pay compensation to someone for personal injury
 - Payments ordered by a court as part of family proceedings, for example in divorce cases
  
    
continue button field: user_saw_intro
---
section:  debt_solutionss
event: Debt Relief Order
question:  |
  What is Debt relief order and is it for you  
subquestion:  |
 
  A debt relief order (DRO) is one way to deal with your debts if you:

    - owe £30,000 or less
    
    - don’t own your own home
    
    - don’t have other assets or things of value
    
    - on’t have much spare income 
    
     You don't have to make payments towards most types of debt included in your DRO and your creditors can’t force you to pay off the debts. A DRO usually lasts **a year** unless your situation improves. When the DRO ends, most of your debts will be **written off**.
     
     **Debts covered by a DRO:**
      
     Debts that can go into a DRO are called ’qualifying debts'. During the DRO period creditors can’t ask you for payments, if they do, you don't have to pay them. They include:

  credit cards, overdrafts and loans, arrears with rent, utility bills, telephone bills, council tax and income tax, benefits overpayments, hire purchase or conditional sale agreements, buy now - pay later agreements, bills for services like vets or solicitors, debts you owe to friends and family, business debts
     
     **Debts not covered by a DRO:**
     
     Not all debts are covered by a DRO. You'll still need to pay:

  -magistrates court fines and confiscation orders relating to criminal activity
  
  -child support and maintenance
  
  -student loans
  
  -social fund loans
  
  -compensation for death and injury
  
  **Is DRO right for you:**
  
    
    1. For DRO, the cost is relatively low(£90), you said **${cost_will}**
    
    2. DRO will affect your credit rating for 6 years, you said  **${credit_will}**
  
    3. it might affect applications you make for British citizenship - if you are unsure then you should get advice from an immigration specialist
    
    4. you can't borrow £500 or more without telling the creditor about the DRO, you can’t get involved in promoting, managing or setting up a limited company, or be a company director, without getting permission from the court
    
    **How to get a DRO?**
    
    You can only apply for a DRO through a specialist DRO adviser, also called an 'approved intermediary'. This is usually a skilled debt adviser who has been given permission to complete the forms and give advice on DROs. They will check that you're eligible to apply and that a DRO is right for you. 
    
    For more information, please visit [GOV.UK](${url_of('https://www.gov.uk/guidance/technical-guidance-for-official-receivers/60-debt-relief-orders') })
    
continue button field: user_saw_intro
---
section:  debt_solutionss
event: Administration Order 
question:  |
  What is an administration order and is it for you?
subquestion:  |
  **What is an administration order?**
  
  An administration order is a formal, legal debt solution which means it's approved by the court and your creditors have to stick to it. It requires two or more debts, yout debts no more than 5000 pounds in total, and a court judgement, if you don’t have a county court judgment or high court judgment, you need to wait for one of your creditors to take court action against you. As soon as judgment is entered you can apply for an administration order.
  
  **What debts administration order include?**
  
  The law does not specifically exclude any particular debt from an AO and when you apply for an AO, you must list all your debts in the application. However, any creditor can object to being included. It is up to the district judge to decide if any debts are left out.

  If a debt is left out, it still counts towards the £5,000 total.
  
  **Is it right for you?**
  Here are the quick comparision:
  
   |Requirment | Your situation|
   |-----------|----------|
   |at least 2 debts | ${len(debt)} debt     |
   | max £5,000 debt       |£${debt_total}       |
   | one of your debts is a county court or high court judgment       |${is_court_debt}      |
   |you have a regular income with some spare income each month| £${month_disposble_income } disposable income|
   | you don't want to have to deal with your creditors directly| ${change_creditor} |
  
 
  
  1. There is no up front fee for AO, The court keeps 10% of your monthly payment to cover their costs, you said your you said **${cost_will}**
   2. Administration orders are entered on the Register of Judgments, Orders and Fines and stay on the register for six years. This information also appears on your credit file. When the administration order ends, the court will change the record on the register to say the administration order has been paid off. Your perference **${credit_will}**
   3. If you are a home owner, you wont be expected to sell it or remortgage it to pay into your administration order. It will be safe. However some courts will not grant an administration order to home owners or people with a mortgage – you will need to check the practice of your local court.
  
  **How do the repayments work?**
  
  The court will look at your financial situation and tell you how much you should pay each month. You have to pay the monthly amount to the court who will then distribute the money to your creditors.

  If you can't afford to repay all your debt over a reasonable time (usually 3 years), you can ask for a composition order. This means you only pay part of the debt. As long as you stick to the repayments, the rest of the debt is written off at the end of the time limit. 
  
  
  **What happens at the end of an administration order?**
 
  An administration order lasts until the debts are cleared and the court fees paid. If there is a composition order, there will be a time limit on how long you pay for, usually 3 years. At the end of that time, you no longer owe the debts in the administration order.At the end of the AO, you can ask the court for a certificate of satisfaction which costs £15.
  
   for more information, please visit [Citizens Advice](${url_of('https://www.citizensadvice.org.uk/debt-and-money/debt-solutions/administration-orders/administration-orders-explained/what-is-an-administration-order/') })
  
 
  
continue button field: user_saw_intro  
---
section:  debt_solutionss
event: Individual Voluntary Arrangement 
question:  |
  What is Individual Voluntary Arrangement(IVA) and is it for you?
subquestion:  |
  **What is IVA?**
  
    An individual voluntary arrangement (IVA) is a formal and legally binding agreement between you and your creditors to pay back your debts over a period of time. This means it’s approved by the court and your creditors have to stick to it.
    
    An IVA can be flexible to suit your needs but it can be expensive. An IVA must be set up by a qualified person, called an insolvency practitioner. This will be a lawyer or an accountant.The insolvency practitioner will charge fees for the IVA. These can often be high and are based on the amount you pay back through the IVA. 
    
    **Is this right for you?**
    
    1. your debts should be to more than £10000 or more, as the cost of IVA usually high, you said **${cost_will}**
    
    2. If you own a home, most IVA agreements include a requirement for you to get a valuation of your home in the final year. If there is equity in the property, you'll usually need to raise a lump sum to put into the IVA by re-mortgaging your home. Equity is the money you'd make from the sale of a property, after any mortgage or secured loans are paid off. You shouldn't have to sell your home to raise the lump sum. If you think you are being asked to sell your home, get specialist advice straight away. you preference on house is **${home_will}**
    
    3. Having an IVA may affect any future income or assets that you receive. For example, if you decide to move house while you have an IVA, any money you make from the sale may have to be paid into the IVA. yous said: **${change_will}**
    
  ** Debts you can include:**
  
  - catalogues
  - personal loans
  - overdrafts
  - credit cards
  - gas and electric arrears
  - Council Tax arrears
  - water arrears
  - payday loans
  - store cards
  - income tax and national insurance arrears
  - tax credit or benefit overpayments
  - debts to family and friends
  - other outstanding bills, for example solicitor's costs, invoices for building work and vets bills
  
  **Debts you can’t include:**

   - maintenance arrears that have been ordered by a court
   - child support arrears
   - student loans
   - magistrates' court fines
   - Social Fund loans
   - TV licence arrears
  
  **How the repayments work**
  
  If you decide to get an IVA, you will work out a repayment plan with the insolvency practitioner. This could be monthly payments, a lump sum or a combination of both.

  The repayment plan should be based on an amount you can reasonably afford and the creditors will need to agree it. If you're making monthly payments the IVA will usually last for 5 or 6 years.

  Any repayments will be paid directly to the insolvency practitioner. They will then distribute the money to your creditors. Some of this will be kept by the insolvency practitioner to pay their fees.

  If the payments you make aren’t enough to pay your debts in full by the end of your IVA, you won’t have to pay the rest. The insolvency practitioner should advise you about this.
    
continue button field: user_saw_intro    
---
section: debt_solutionss
event: Debt Management Plan
question:  |
  You can apply for Debt Management Plan
subquestion:  |
 ##### A debt management plan (DMP) helps you to manage your debts and pay them off at a more affordable rate by making reduced monthly payments. 
 
 ** Is it right for you?**
 
 A DMP may be a suitable debt solution if you have some surplus money available each month once you’ve paid your priority costs such as rent or mortgage, food, accommodation and utility bills.
 
 **You can set up a Debt management plan with a debt agent who is qualified to do it**. Some company charge you for it, some are free. 
 
 **Benefits of a DMP**:

 - You’ll only pay what you can afford to your creditors after your agent put together a monthly household budget
 - If you’ve fallen behind with your household bills you can add the arrears to your DMP to help get your accounts back up to date. You'll still need to make your regular ongoing monthly payments.
 - You'll make one monthly payment to us and your agent the payments to your creditors for you
 - Your agent can and should review your DMP regularly to make sure you’re paying what you can afford

 **Risks of a DMP**:
 
 - Some of your creditors may still contact you
 - Most creditors will agree to reduce or stop interest and charges, but they don’t have to
 - If creditors continue adding interest and charges, this could increase the total amount you currently owe
 - Your creditors don’t have to agree to your reduced payments, but we’ll still send your payments anyway
 - Your creditors may still take further court action against you, such as a County Court judgment (CCJ)
 - Reduced payments may lead to a longer arrangement term and could have a negative impact on your credit file
 
 ** Cost of a DMP**

 Some companies will charge:

 - a set up fee
 - a handling fee each time you make a payment
 
 **Eligibility **
 
 Debt Management Plans can only be used to pay {unsecured debts}, for example debts that have not been guaranteed against your property.

continue button field: user_saw_intro
---
terms:  
  unsecured debts:  |
    An unsecured debt is a debt for which the creditor does not have a security interest in collateral, and the creditor is therefore not entitled to take property from you to satisfy that debt without a judgment.
    
    Common types of unsecured debt are credit cards, medical bills, most personal loans, and student loans*. These debts help you do something (buy items, pay your doctor, get an education), but they are not backed by a specific asset.
  secured debts:  |
    A secured debt is a debt for which the creditor has a security interest in collateral, meaning the creditor has a right to take property to satisfy the debt.
    
---
section:  debt_solutionss
event: not Debt Relief Order
question:  |
  You cant  apply for Debt relief Order  
subquestion:  |
  The following table shows comparison of DRO requirments and your personal situation, ther is one or more Criteria you dont meet. 
  
   |Requirment | Your situation|
   |-----------|----------|
   |less than £75 monthly disposible income | £${month_disposble_income}
   | max £30,000 debt       |£${debt_total}       |
   | Not a homeowner       |${is_homeowner}      |
   | Assets no more than £2000| £${assets.total()}|
   | it's been at least 6 years since your last DRO | not know |
   | Currently going through nother formal insolvency procedure| ${another_debt_solution} |
   
   It is also important to give your information truthfully when apply for DRO. 
  
    
    The following debts of yours is **included** in DRO:
      % for item in Dro_debt:
        **${item}**
      % endfor
      
      
      
  The following debts of yours is **not** included in your debt:
      % for item in Dro_debt_not:
        **${item}**
      % endfor
continue button field: user_saw_intro
---
section:  debt_solutionss
event: not Administration Order
question:  |
  You cant apply for Administration Order
subquestion:  |
   The following table shows comparison of Administration Order requirments and your personal situation, ther is one or more Criteria you dont meet. 
   
   |Requirment | Your situation|
   |-----------|----------|
   |at least 2 debts | ${len(debt)} debt     |
   | max £5,000 debt       |£${debt_total}       |
   | one of your debts is a county court or high court judgment       |${is_court_debt}      |
   |you have a regular income with some spare income each month| £${month_disposble_income } disposable income|
   | you don't want to have to deal with your creditors directly| ${change_creditor} |

continue button field: user_saw_intro
---
code:  |
  
  Available_solutions=[]
  not_available_solution=[]
  total_assets= assets.total()
 
  formal_solutions = [
    {
  "name": "Bankruptcy",
  "cost": 680,
  "min_amount":750,
   "number":0,
  "credit rating": "Strongly Affected",
  "duration": "12 months",
  "amount": 1000000000,
  "income": 123000,
  "assets": 1000000,
  "home": "risk",
  "homeowner": "Yes",
  "reason":"none",
  "court_case": "no"},
  
   {
  'name': "Debt Relief Order",
   "number":0,
   "min_amount":0,
  "cost": 90 ,
  "credit rating": "affected",
  "durtion" :"12 months",
  "amount":30000,
  "income":75,
  "assets": 2000,
  "home": "None",
   "homeowner": "No",
   "court_case": "no",
  "reason":"none"},
  
    { 
  'name': "Administration Order",
  "cost": 0.1,
  "min_amount":0,
  "number":1,
  "credit rating": "affected",
  "durtion" :"36 months",
  "amount":5000,
  "income":100000,
  "assets": 100000,
  "home": "risk",
   "homeowner": "Yes",
  "reason":"none",
  "court_case": "yes"},
  
    {
  'name': "Individual Voluntary Arrangement",
  "cost": 4000,
  "min_amount":0,
  "number":0,
  "credit rating": "affected",
  "durtion" :"5 years",
  "amount":1000000,
  "income":100000,
  "assets": 100000,
  "home": "safe",
   "homeowner": "Yes",
   "court_case": "no",
  "reason":"none"}]
  
  for item in formal_solutions:
    if item['amount']< debt_total1:
      not_available_solution.append(item)
      
      
      item["reason"] = "Your debt amount " +"£"+str(debt_total1) + " exceeded maximum allowance "+ "£"+str(item['amount'] )
    if debt_total1 < item['min_amount']:
      not_available_solution.append(item)
      
      item["reason"] = "Your debt amount " +"£"+str(debt_total1) + " do not meet the minimum requirments "+ "£"+str(item['min_amount'] )
      
    
    elif item["homeowner"]=="No" and (user.house_status =="Mortgaged" or user.house_status =="Owns property outright"):
      not_available_solution.append(item)
      
      item["reason"]= "You are a homeowner can not apply "+item["name"]
      
    elif month_disposble_income >= item['income']:
      not_available_solution.append(item)
      
      item["reason"]="Your net monthly income " +"£"+str(month_disposble_income) + " exceeded maximum allowance "+ "£"+str(item['income'] )
   
    elif len(debt) <=item["number"]:
      not_available_solution.append(item)
      item["reason"]= "you need to have more than 1 debts, you currently have: "+ str(debt_num)+" debts"
    
    elif item['assets']<= total_assets:
      not_available_solution.append(item)
      item["reason"]= "You currently have assets worth £"+str(total_assets)+" which is more than what is required:  £"+ str(item['assets'])
      
    
      
 
  Available_solutions = [x for x in formal_solutions if x not in not_available_solution]
---
code:  |
  Dro_notcover_list=['TV license','Court Fine/ Penalty charge','Student Loans','Child maintenance/child support agency debts','Claims against you for damage or personal injury','Criminal fines']
  Dro_debt_not=["None"]
  Dro_debt=[]
   
  for item in debt:
    if item.name in Dro_notcover_list:
      Dro_debt_not.remove("None")
      Dro_debt_not.append(item.name)
    else:
      Dro_debt.append(item.name)
  
 
---
code: |
  uploaded_file.make_ocr_pdf() 
  ocr_finished = True
---
mandatory: True
question: |
  Please Upload supporting files if any. 
subquestion: |
  I will convert it to a searchable PDF.
fields:
  - File: uploaded_file
    datatype: files
    required: False
section: Income
---
mandatory: True
question: |
  Sign your name
subquestion: |
  By signing your name, you agree to
  our terms and conditions.
section: Signatures
signature: your_signature
---
mandatory: True
question: |
  Your documents are ready. Please print and file!
buttons:
  - Exit: exit
  - Restart: restart
section: conclusion  
attachment:
  - name: Personal Debt Advisor
    filename: Example_Doc
    valid formats:
      - docx
      - pdf
    content:  |
      This is just a place holder for the final document
      
      Hey, 
      Your total annual income is ${ currency(jobs.total(),symbol=u'£')}
      Your priority debts is
      ${your_signature}
